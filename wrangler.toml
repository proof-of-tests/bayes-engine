name = "bayes-engine"
main = "result/worker/worker.js"
compatibility_date = "2024-10-01"

[build]
command = "nix build .#webapp"

# Serve static assets (HTML, CSS, WASM) from the assets directory
# CloudFlare Workers will automatically serve these files
[assets]
directory = "result/assets"

# KV namespace for storing messages
# Note: Using KV as a temporary workaround for WASM compatibility
# Long-term solution should use Postgres via Hyperdrive or D1
[[kv_namespaces]]
binding = "MESSAGES"
id = "placeholder_id"
preview_id = "placeholder_preview_id"

# E2E testing environment - uses pre-compiled files without running build
[env.e2e]
# No build command - assumes result/ directory already exists with compiled files
